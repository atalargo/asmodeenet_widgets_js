webpackJsonp([9],{"7Mi/":function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n});var s=a("XQ85");const i=new s.a;i.maxAge=6e5;const n=new s.a;n.maxAge=864e5},ByyM:function(e,t,a){"use strict";var s=a("wYgs"),i=a("7Mi/");const n={all:()=>s.a.http.get(s.a.convert("/v1/games"),{cache:i.b}),rankables:()=>s.a.http.get(s.a.convert("/v1/game/rankables"),{cache:i.b}),achievements:e=>s.a.http.get(s.a.convert("/v1/game/"+e+"/achievements?limit=200"),{cache:i.b}),crosspromo:(e,t)=>s.a.http.get(s.a.convert("/v1/game/"+e+"/product/"+t),{cache:i.b}),counterData:e=>s.a.http.get(e+"/game-counter",{cache:i.b})};t.a=n},"DPF+":function(e,t,a){"use strict";var s=a("vdRI"),i=function(e){delete e.target.onerror,e.target.src="https://cdn.daysofwonder.com/images/avatars/avatar-neutral.jpg"},n=function(e){delete e.target.onerror,delete e.target.src},r=function(e){delete e.target.onerror,delete e.target.src},c=function(e){delete e.target.onerror,delete e.target.src};var o=function(){const e=/^({(-?\d+(\.\d+)?\s*(,?\s*(-?\d+(\.\d+)?))*)})\s(.+)$/,t=/^(([[\]])\s*(-Inf|-?\d+(\.\d+)?)\s*,\s*(\+?Inf|-?\d+(\.\d+)?)\s*([[\]]))\s(.+)$/;function a(e){return"-Inf"===e?-1/0:"+Inf"===e||"Inf"===e?1/0:parseFloat(e)}let s=function(s,i){i=i.trim();let n=e.exec(i)||t.exec(i);if(!n)return console.error('"'+i+'" is not a valid interval.'),!1;if(n[3]){let e=a(n[3]),t=a(n[5]);return("["===n[2]?s>=e:s>e)&&("]"===n[7]?s<=t:s<t)}{let e=n[2].split(",");for(let t=0;t<e.length;t++){let a=e[t];if(s===parseInt(a))return!0}}return!1},i=function(e,t){switch("pt_BR"===t&&(t="xbr"),t.length>3&&(t=t.split("_")[0]),t){case"az":case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":return 0;case"af":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"oc":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return 1===e?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"hy":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===e||1===e?0:1;case"be":case"bs":case"hr":case"ru":case"sh":case"sr":case"uk":return 1===e&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;case"cs":case"sk":return 1===e?0:e>=2&&e<=4?1:2;case"ga":return 1===e?0:2===e?1:2;case"lt":return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2;case"sl":return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3;case"mk":return e%10==1?0:1;case"mt":return 1===e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3;case"lv":return 0===e?0:e%10==1&&e%100!=11?1:2;case"pl":return 1===e?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2;case"cy":return 1===e?0:2===e?1:8===e||11===e?2:3;case"ro":return 1===e?0:0===e||e%100>0&&e%100<20?1:2;case"ar":return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11&&e%100<=99?4:5;default:return 0}},n=function(e,t){return t&&Object.keys(t).forEach(function(a){e=e.replace(a,t[a])}),e};return{getTrans:function(e,t,a,s){if(void 0!==e[a]){return n(e[a],s)}return""},getTransChoice:function(a,r,c,o,h){if(void 0!==a[o]){let m=function(a,n,r){let c,o=a.split("|"),h={},m=[];o.forEach(function(a){a=a.replace("||","|").trim(),(c=e.exec(a))?h[c[0]]=c:(c=t.exec(a))?h[c[0]]=c:(c=/^\w+:\s*(.*?)$/.exec(a))?m.push(c[1]):m.push(a)});let l=Object.keys(h);for(let e=0;e<l.length;e++){let t=l[e];if(s(n,t))return h[t][h[t].length-1]}let d=i(n,r);return void 0===m[d]?1===o.length&&void 0!==m[0]?m[0]:(console.error('Unable to choose a translation for "'+a+'" with locale "'+r+'" for value "'+n+'". Double check that this translation has the correct plural options (e.g. "There is one apple|There are %%count%% apples").'),""):m[d]}(a[o],c,r);return n(m,h)}return""}}}();const h={keyforge:"https://www.keyforgegame.com/",xwing:"https://squadbuilder.fantasyflightgames.com/"},m={props:["config"],computed:{title(){return this.getTrans(this.$options.name+"_title")},lang(){return this.$moment.locale()!==s.a.getters.globalOptions.lang&&this.$moment.locale(s.a.getters.globalOptions.lang),s.a.getters.globalOptions.lang},gameIconError:()=>n,avatarError:()=>i,achievementError:()=>r,genericImageError:()=>c,isLogged:()=>!s.a.getters.unloggedMode,isIn3rdParty:()=>!!s.a.getters.globalOptions.in_3rd_party,baseHost:()=>s.a.getters.globalOptions.host?s.a.getters.globalOptions.host.replace(/\/$/,""):"",baseISImageHost:()=>"https://ncdn.asmodee.net/is/img/"},methods:{getTrans(e,t){return o.getTrans(this.config.trans,this.lang,e,t)},getTransChoice(e,t,a){return o.getTransChoice(this.config.trans,this.lang,e,t,a)},urlFor(e,t){if(t=t||{},this.config.urls&&this.config.urls[e]){let a=this.config.urls[e];return Object.keys(t).forEach(function(e){a=a.replace(":"+e,t[e])}),/^\/[a-z]{2}\/.*/.exec(a)||(a="/"+this.lang+a),this.baseHost+a}return""},gameUrl(e){return["keyforge","xwing"].includes(e)?h[e]:this.urlFor("game-index",{id:e})},goToGame(e){let t=this.gameUrl(e);return["keyforge","xwing"].includes(e)?window.open(t):this.isIn3rdParty?window.open(t):window.location=t,!1},goToGameRanking(e){let t=this.urlFor("rankings-game",{id:e});this.isIn3rdParty?window.open(t):window.location=t},forceHTTPS:e=>e?e.replace("^http://","https://"):e,debugDump(){console.log(...arguments)}}};t.a=m},KDwR:function(e,t,a){"use strict";const s={methods:{hasAtLeastOneValidAchievement(e){return void 0!==e.find(this.validAchievementToDisplay)},validAchievementToDisplay(e){return!(null===this.getAchievementDescription(e,"")&&!e.picture&&!e.ribbon)},getAchievementFieldForCurrentLang(e,t){return e.textsFor(this.lang)[t]},getAchievementDescription(e,t,a){if(void 0===a&&(a=!0),void 0===e.texts)return null;let s=e.textsFor(this.lang),i="";return s.name&&(i="<p><b>"+s.name+"</b></p>"),e.awarded_ts&&(i+='<p><small><time date="'+e.awarded_ts+'">'+t+"</time></small></p>"),a&&s.description&&(i+="<p>"+s.description+"</p>"),i},getAchievementIcon:e=>e.hasPicture()?e.picture:e.ribbon,getAchievementIconClass:e=>e.hasRibbon()&&!e.hasPicture()?"ribbon":e.isMedal()?"medal":""}};t.a=s},MgXD:function(e,t,a){"use strict";var s=a("wYgs");t.a=((e,t,a,i)=>{t=t||1,i=i||{},a.limit=a.limit||10,a.offset=(t-1)*a.limit,i.total&&a.offset>i.total&&(a.offset=i.total);let n={params:a};return i.cache&&(n.cache=i.cache),s.a.http.get(s.a.convert(e),n)})},Pk40:function(e,t,a){"use strict";const s=Object.freeze({3:"medal",2:"flag",1:"badge",0:"none"}),i=Object.freeze(Object.keys(s).map(e=>[s[e],e]).reduce(function(e,t){return e[t[0]]=t[1],e},{}));t.a=class{constructor(e={}){let t=this;Object.keys(e).forEach(a=>{t[a]=e[a]})}category(){return s[this.category]}isOfCat(e){return i[e]===this.category}isOfType(e){return this.type===e}isMedal(){return this.isOfCat("medal")}isFlag(){return this.isOfCat("flag")}isBadge(){return this.isOfCat("badge")}isNone(){return this.isOfCat("none")}isEvent(){return this.isOfType("event")}isOfficer(){return this.isOfType("officer")}isNormal(){return this.isOfType("normal")}isCommunity(){return this.isOfType("community")}isActive(){return this.active}isSecret(){return this.secret}hasRibbon(){return!!this.ribbon}hasPicture(){return!!this.picture}hasPictureOrRibbon(){return this.hasPicture()||this.hasRibbon()}textsFor(e){let t=null;return void 0===this.texts.length?t=void 0!==this.texts[e]?this.texts[e]:this.texts.en:(0===(t=this.texts.filter(t=>t.lang===e)).length&&(t=this.texts.filter(e=>"en"===e.lang)),t&&(t=t[0])),t=t||{description:null,name:null}}isAlwaysHidden(){return"officer"===this.type}}},lQHA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("uj17"),i=a.n(s),n=a("wYgs"),r=a("ByyM"),c=a("wZkS"),o=a("DPF+"),h=a("KDwR"),m=a("Pk40"),l={name:"game-achievements",props:["config"],mixins:[o.a,h.a],computed:{gameId:function(){return this.config.game.id},gameName:function(){return this.config.game.name},gameAchievements:function(){var e=[],t=this.userAchievements.map(function(e){return parseInt(e.id)});if(this.achievements){var a=this;e=this.achievements.filter(function(e){if(parseInt(e.id)>a.upperOrder&&(a.upperOrder=parseInt(e.id)+10),(0===t.length||-1===t.indexOf(parseInt(e.id)))&&!e.retired&&!e.isAlwaysHidden()&&a.getAchievementDescription(e)&&!e.isEvent()){if(!e.secret)return!0;a.secret+=1}return!1})}return e},userAchievements:function(){return this.user&&this.user.achievements[this.gameId]?this.user.achievements[this.gameId].map(function(e){return new m.a(e)}):[]}},methods:{getUserAchievements:function(){return this.isLogged?c.a.achievements():null},getAchievements:function(){var e=this;i.a.all([r.a.achievements(e.gameId),e.getUserAchievements()]).then(i.a.spread(function(t,a){e.achievements=t.data.achievements.map(function(e){return new m.a(e)}),a&&(e.user=a.data.user)}))}},mounted:function(){n.a.ifInitialized(this.getAchievements)},data:function(){return{achievements:null,user:null,secret:0,upperOrder:0}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("keep-alive",[e.gameAchievements.length>0?a("panel",{staticClass:"achievements",attrs:{config:e.config}},[a("template",{slot:"header"},[e._v("Â "),e.gameName?a("span",{domProps:{innerHTML:e._s(e.getTrans("achievements_for",{"%game%":e.gameName}))}}):e._e()]),e._v(" "),a("template",{slot:"body"},[e.userAchievements.length>0?a("h4",[e._v(e._s(e.getTrans("owned_achievements")))]):e._e(),e._v(" "),e.userAchievements.length>0?a("div",{staticClass:"achievements_list owned"},e._l(e.userAchievements,function(t){return!t.isAlwaysHidden()&&e.getAchievementDescription(t)?a("div",{key:t.id,staticClass:"achievement_item",style:{order:t.id}},[a("div",{staticClass:"icon-container"},[t.hasPictureOrRibbon()?a("img",{staticClass:"achievement icon",class:e.getAchievementIconClass(t),attrs:{src:e.forceHTTPS(e.getAchievementIcon(t))},on:{error:e.achievementError}}):e._e()]),e._v(" "),a("div",{domProps:{innerHTML:e._s(e.getAchievementDescription(t,["xxs","xs","sm"].includes(e.$mq)?e.$moment.unix(t.awarded_ts).format("LL"):e.$moment.unix(t.awarded_ts).format("LLLL")))}})]):e._e()}),0):e._e(),e._v(" "),e.userAchievements.length>0&&e.gameAchievements.length>0?a("hr"):e._e(),e._v(" "),e.isLogged&&e.gameAchievements.length>0?a("h4",[e._v(e._s(e.getTrans("locked_achievements")))]):e._e(),e._v(" "),e.gameAchievements.length>0?a("div",{staticClass:"achievements_list"},[e._l(e.gameAchievements,function(t){return a("div",{key:t.id,staticClass:"achievement_item unowned",style:{order:t.id}},[a("div",{staticClass:"icon-container"},[a("img",{staticClass:"achievement icon",class:e.getAchievementIconClass(t),attrs:{src:e.forceHTTPS(e.getAchievementIcon(t))},on:{error:e.achievementError}})]),e._v(" "),a("div",{domProps:{innerHTML:e._s(e.getAchievementDescription(t))}})])}),e._v(" "),e.secret>0?a("div",{staticClass:"achievement_item hidden_counts",style:{order:e.upperOrder}},[a("h4",[e._v(e._s(e.getTransChoice(e.secret,"and_hidden_counts",{"%count%":e.secret})))])]):e._e()],2):e._e()])],2):e._e()],1)},staticRenderFns:[]};var u=a("mUJo")(l,d,!1,function(e){a("zuhn")},"data-v-4dbcf956",null);t.default=u.exports},wZkS:function(e,t,a){"use strict";var s=a("wYgs"),i=a("MgXD"),n=a("7Mi/");const r={myAccount:e=>(e=e||!1,s.a.http.get(s.a.convert("/v1/user/me"),{cache:n.b,forceUpdate:e})),details:(e,...t)=>(0===t.length&&(t=["achievements","userapps","nbbuddies","onlinegames"]),s.a.http.get(s.a.convert("/v1/user/"+e+"?extras="+t.join(","),"details"),{cache:n.b})),achievements:e=>(e=e||"me",s.a.http.get(s.a.convert("/v1/user/"+e+"?extras=achievements","achievements"),{cache:n.b})),activities:e=>s.a.http.get(s.a.convert("/v1/user/"+e+"?extras=userapps","activity"),{cache:n.a}),onlineGames:(e,t)=>s.a.http.get(s.a.convert("/v1/user/"+e+"/games/summary"+(t?"/"+t:"")),{cache:n.a}),rank:(e,t)=>s.a.http.get(s.a.convert("/v1/user/"+e+"/rank/"+t),{cache:n.a}),myRank:e=>r.rank("me",e),buddiesCollection:()=>s.a.http.get("/v1/user/me/buddies/collection",{cache:n.b}),addBuddy:e=>s.a.http.post("/v1/user/me/buddies/"+e),removeBuddy:e=>s.a.http.delete("/v1/user/me/buddies/"+e),lastgames:(e,t,a,r,c)=>Object(i.a)(s.a.convert("/v1/user/"+e+"/lastgames/"+t,"lastgames"),r,{limit:c,status:a},{cache:n.b}),history:(e,t,a,r,c,o)=>Object(i.a)(s.a.convert("/v1/user/"+e+"/games/"+t,"history"),c,{limit:o,y:r,status:a,o:0},{cache:n.b})};t.a=r},wjk5:function(e,t,a){(e.exports=a("Vmy+")(!1)).push([e.i,"img.icon[data-v-4dbcf956]{margin-right:0!important}img.icon.achievement[data-v-4dbcf956]{margin:8px;height:60px;width:60px;object-fit:contain}img.icon.achievement.ribbon[data-v-4dbcf956]{height:30px}img.icon.achievement.ribbon.small[data-v-4dbcf956]{height:15px;width:30px}img.icon.achievement.small[data-v-4dbcf956]{height:30px;width:30px}img.icon.game[data-v-4dbcf956]{max-height:60px;max-width:60px}img.icon.game.fixed[data-v-4dbcf956]{height:60px;width:60px}img.icon.game.small[data-v-4dbcf956]{height:30px;width:30px}@media (max-width:767.98px){img.icon.game.fixed[data-v-4dbcf956]{height:30px;width:30px}}img.icon.avatar[data-v-4dbcf956]{max-height:60px;max-width:60px}img.icon.avatar.fixed[data-v-4dbcf956]{height:60px;width:60px}@media (max-width:767.98px){img.icon.avatar.fixed[data-v-4dbcf956]{height:30px;width:30px}}.panel.achievements[data-v-4dbcf956] h4{color:#55387c;font-size:1em;max-height:140px;margin-top:0;margin:auto}.panel.achievements[data-v-4dbcf956] .achievements_list{display:flex;flex-wrap:wrap;justify-content:flex-start}.panel.achievements[data-v-4dbcf956] .achievements_list .achievement_item{border:1px solid #ddd;border-radius:5px;display:flex;font-size:.8em;margin:5px;padding:5px;white-space:nowrap;width:268px}.panel.achievements[data-v-4dbcf956] .achievements_list .achievement_item.unowned{filter:grayscale(100%)}.panel.achievements[data-v-4dbcf956] .achievements_list .achievement_item.hidden_counts{height:80px}.panel.achievements[data-v-4dbcf956] .achievements_list .achievement_item .icon-container{align-items:center;display:flex;height:60px;justify-content:center;margin:auto;margin-left:5px;margin-right:5px;width:60px}.panel.achievements[data-v-4dbcf956] .achievements_list .achievement_item img{margin:0}.panel.achievements[data-v-4dbcf956] .achievements_list .achievement_item div{display:inline-block;margin:auto 3px;white-space:normal}.panel.achievements[data-v-4dbcf956] .achievements_list .achievement_item div p{display:block}@media (max-width:767.98px){.panel.achievements .achievements_list .achievement_item[data-v-4dbcf956]{font-size:.8em;width:255px}.panel.achievements .achievements_list .achievement_item h4[data-v-4dbcf956]{font-size:.8em}}@media (min-width:1200px){.panel.achievements .achievements_list .achievement_item[data-v-4dbcf956]{font-size:.8em;width:330px}}@media (min-width:450px) and (max-width:991.98px){.panel.achievements .achievements_list .achievement_item[data-v-4dbcf956]{font-size:.8em;width:258px}}",""])},zuhn:function(e,t,a){var s=a("wjk5");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,a("pFN4").default)("ad3c5eba",s,!0,{})}});
//# sourceMappingURL=asnetapi.9.cf2fb1f32d24a22bc0b7.js.map